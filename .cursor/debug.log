{"location":"lib/elevenlabs.ts:37","message":"transcribeSpeech entry","data":{"audioBlobSize":56324,"audioBlobType":"audio/webm","hasApiKey":true},"timestamp":1768657602707,"sessionId":"debug-session","runId":"run1","hypothesisId":"D"}
{"location":"lib/elevenlabs.ts:60","message":"Before fetch request","data":{"endpointUrl":"https://api.elevenlabs.io/v1/speech-to-text/convert?enable_logging=false","hasApiKey":true,"headerKeys":["xi-api-key","content-type"],"formDataFields":["model_id","file"]},"timestamp":1768657602719,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:42","message":"Audio converted to buffer","data":{"bufferSize":56324},"timestamp":1768657602717,"sessionId":"debug-session","runId":"run1","hypothesisId":"E"}
{"location":"lib/elevenlabs.ts:70","message":"After fetch response","data":{"status":404,"statusText":"Not Found","ok":false,"url":"https://api.elevenlabs.io/v1/speech-to-text/convert?enable_logging=false"},"timestamp":1768657602856,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:75","message":"Error response received","data":{"status":404,"statusText":"Not Found","errorText":"{\"detail\":\"Not Found\"}"},"timestamp":1768657602863,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:89","message":"Exception caught","data":{"errorType":"Error","errorMessage":"ElevenLabs API error: 404"},"timestamp":1768657602867,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:37","message":"transcribeSpeech entry","data":{"audioBlobSize":70814,"audioBlobType":"audio/webm","hasApiKey":true},"timestamp":1768657887775,"sessionId":"debug-session","runId":"run1","hypothesisId":"D"}
{"location":"lib/elevenlabs.ts:42","message":"Audio converted to buffer","data":{"bufferSize":70814},"timestamp":1768657887781,"sessionId":"debug-session","runId":"run1","hypothesisId":"E"}
{"location":"lib/elevenlabs.ts:60","message":"Before fetch request","data":{"endpointUrl":"https://api.elevenlabs.io/v1/speech-to-text","hasApiKey":true,"headerKeys":["xi-api-key","content-type"],"formDataFields":["model_id","file"]},"timestamp":1768657887783,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:70","message":"After fetch response","data":{"status":400,"statusText":"Bad Request","ok":false,"url":"https://api.elevenlabs.io/v1/speech-to-text"},"timestamp":1768657887910,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:75","message":"Error response received","data":{"status":400,"statusText":"Bad Request","errorText":"{\"detail\":\"There was an error parsing the body\"}"},"timestamp":1768657887918,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:89","message":"Exception caught","data":{"errorType":"Error","errorMessage":"ElevenLabs API error: 400"},"timestamp":1768657887921,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:37","message":"transcribeSpeech entry","data":{"audioBlobSize":64052,"audioBlobType":"audio/webm","hasApiKey":true},"timestamp":1768658101441,"sessionId":"debug-session","runId":"run1","hypothesisId":"D"}
{"location":"lib/elevenlabs.ts:42","message":"Audio converted to buffer","data":{"bufferSize":64052},"timestamp":1768658101449,"sessionId":"debug-session","runId":"run1","hypothesisId":"E"}
{"location":"lib/elevenlabs.ts:70","message":"Before fetch request","data":{"endpointUrl":"wss://api.elevenlabs.io/v1/speech-to-text","hasApiKey":true,"headerKeys":["xi-api-key"],"formDataFields":["model_id","file"],"formDataType":"FormData"},"timestamp":1768658101451,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:89","message":"Exception caught","data":{"errorType":"TypeError","errorMessage":"fetch failed"},"timestamp":1768658101454,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:37","message":"transcribeSpeech entry","data":{"audioBlobSize":60188,"audioBlobType":"audio/webm","hasApiKey":true},"timestamp":1768662165585,"sessionId":"debug-session","runId":"run1","hypothesisId":"D"}
{"location":"lib/elevenlabs.ts:42","message":"Audio converted to buffer","data":{"bufferSize":60188},"timestamp":1768662165603,"sessionId":"debug-session","runId":"run1","hypothesisId":"E"}
{"location":"lib/elevenlabs.ts:70","message":"Before fetch request","data":{"endpointUrl":"https://api.elevenlabs.io/v1/speech-to-text","hasApiKey":true,"headerKeys":["xi-api-key","content-type"],"formDataFields":["model_id","file"],"formDataType":"FormData"},"timestamp":1768662165606,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:37","message":"transcribeSpeech entry","data":{"audioBlobSize":37004,"audioBlobType":"audio/webm","hasApiKey":true},"timestamp":1768662549251,"sessionId":"debug-session","runId":"run1","hypothesisId":"D"}
{"location":"lib/elevenlabs.ts:42","message":"Audio converted to buffer","data":{"bufferSize":37004},"timestamp":1768662549266,"sessionId":"debug-session","runId":"run1","hypothesisId":"E"}
{"location":"lib/elevenlabs.ts:70","message":"Before fetch request","data":{"endpointUrl":"https://api.elevenlabs.io/v1/speech-to-text","hasApiKey":true,"headerKeys":["xi-api-key","content-type"],"formDataFields":["model_id","file"],"formDataType":"FormData"},"timestamp":1768662549271,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:77","message":"Starting formData buffer conversion","data":{},"timestamp":1768662549272,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:89","message":"Exception caught","data":{"errorType":"TypeError","errorMessage":"dest.end is not a function"},"timestamp":1768662549275,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"lib/elevenlabs.ts:37","message":"transcribeSpeech entry","data":{"audioBlobSize":40868,"audioBlobType":"audio/webm","hasApiKey":true},"timestamp":1768662976489,"sessionId":"debug-session","runId":"run1","hypothesisId":"D"}
{"location":"lib/elevenlabs.ts:42","message":"Audio converted to buffer","data":{"bufferSize":40868},"timestamp":1768662976511,"sessionId":"debug-session","runId":"run1","hypothesisId":"E"}
{"location":"lib/elevenlabs.ts:70","message":"Before fetch request","data":{"endpointUrl":"https://api.elevenlabs.io/v1/speech-to-text","hasApiKey":true,"headerKeys":["xi-api-key","content-type"],"formDataFields":["model_id","file"],"formDataType":"FormData"},"timestamp":1768662976515,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:77","message":"Starting formData buffer conversion","data":{},"timestamp":1768662976517,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:85","message":"FormData chunk received","data":{"chunkSize":105,"totalChunks":1},"timestamp":1768662976519,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:85","message":"FormData chunk received","data":{"chunkSize":9,"totalChunks":2},"timestamp":1768662976521,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:85","message":"FormData chunk received","data":{"chunkSize":154,"totalChunks":4},"timestamp":1768662976525,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:85","message":"FormData chunk received","data":{"chunkSize":2,"totalChunks":3},"timestamp":1768662976523,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:85","message":"FormData chunk received","data":{"chunkSize":40868,"totalChunks":5},"timestamp":1768662976527,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:85","message":"FormData chunk received","data":{"chunkSize":58,"totalChunks":6},"timestamp":1768662976530,"sessionId":"debug-session","runId":"run2","hypothesisId":"F"}
{"location":"lib/elevenlabs.ts:89","message":"Exception caught","data":{"errorType":"TypeError","errorMessage":"The \"list[0]\" argument must be an instance of Buffer or Uint8Array. Received type string ('-------------------------...')"},"timestamp":1768662976537,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"app/api/translate/route.ts:4","message":"POST /api/translate entry","data":{},"timestamp":1768666935696,"sessionId":"debug-session","runId":"run4","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:11","message":"Request body parsed","data":{"hasText":true,"textType":"string","textLength":24},"timestamp":1768666935744,"sessionId":"debug-session","runId":"run4","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:18","message":"Before translateWithCodeswitching call","data":{},"timestamp":1768666935750,"sessionId":"debug-session","runId":"run4","hypothesisId":"K"}
{"location":"lib/gemini.ts:80","message":"translateWithCodeswitching entry","data":{"textLength":24,"textPreview":"我昨天吃了很多帕萨然后我回家的时候我能知道压拉屎","hasApiKey":true},"timestamp":1768666935756,"sessionId":"debug-session","runId":"run4","hypothesisId":"J"}
{"location":"lib/gemini.ts:84","message":"Model initialized","data":{"modelName":"gemini-2.5-pro"},"timestamp":1768666935760,"sessionId":"debug-session","runId":"run4","hypothesisId":"J"}
{"location":"lib/gemini.ts:114","message":"Before generateContent call","data":{"promptLength":923},"timestamp":1768666935765,"sessionId":"debug-session","runId":"run4","hypothesisId":"J"}
{"location":"lib/gemini.ts:150","message":"Exception caught in translateWithCodeswitching","data":{"errorType":"GoogleGenerativeAIFetchError","errorMessage":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent: [429 Too Many Requests] You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.5-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.5-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.5-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.5-pro\nPlease retry in 42.97277352s. [{\"@type\":\"type.googleapis.com/google.rpc.Help\",\"links\":[{\"description\":\"Learn more about Gemini API quotas\",\"url\":\"https://ai.google.dev/gemini-api/docs/rate-limits\"}]},{\"@type\":\"type.googleapis.com/google.rpc.QuotaFailure\",\"violations\":[{\"quotaMetric\":\"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\",\"quotaId\":\"GenerateContentInputTokensPerModelPerDay-FreeTier\",\"quotaDimensions\":{\"location\":\"global\",\"model\":\"gemini-2.5-pro\"}},{\"quotaMetric\":\"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\",\"quotaId\":\"GenerateContentInputTokensPerModelPerMinute-FreeTier\",\"quotaDimensions\":{\"location\":\"global\",\"model\":\"gemini-2.5-pro\"}},{\"quotaMetric\":\"generativelanguage.googleapis.com/generate_content_free_tier_requests\",\"quotaId\":\"GenerateRequestsPerMinutePerProjectPerModel-FreeTier\",\"quotaDimensions\":{\"model\":\"gemini-2.5-pro\",\"location\":\"global\"}},{\"quotaMetric\":\"generativelanguage.googleapis.com/generate_content_free_tier_requests\",\"quotaId\":\"GenerateRequestsPerDayPerProjectPerModel-FreeTier\",\"quotaDimensions\":{\"location\":\"global\",\"model\":\"gemini-2.5-pro\"}}]},{\"@type\":\"type.googleapis.com/google.rpc.RetryInfo\",\"retryDelay\":\"42s\"}]","isSyntaxError":false,"isTypeError":false},"timestamp":1768666936416,"sessionId":"debug-session","runId":"run4","hypothesisId":"J"}
{"location":"app/api/translate/route.ts:27","message":"Exception caught in POST /api/translate","data":{"errorType":"Error","errorMessage":"Failed to translate text. Please try again."},"timestamp":1768666936438,"sessionId":"debug-session","runId":"run4","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:4","message":"POST /api/translate entry","data":{},"timestamp":1768667469976,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:11","message":"Request body parsed","data":{"hasText":true,"textType":"string","textLength":7},"timestamp":1768667470012,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:18","message":"Before translateWithCodeswitching call","data":{},"timestamp":1768667470017,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"lib/gemini.ts:80","message":"translateWithCodeswitching entry","data":{"textLength":7,"textPreview":"Hello你好","hasApiKey":true},"timestamp":1768667470022,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:84","message":"Model initialized","data":{"modelName":"gemini-2.5-flash"},"timestamp":1768667470024,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:114","message":"Before generateContent call","data":{"promptLength":906},"timestamp":1768667470027,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:119","message":"After generateContent call","data":{"hasResponse":true},"timestamp":1768667481610,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:124","message":"Response text extracted","data":{"textLength":257,"textPreview":"```json\n{\n  \"translated\": \"你好\",\n  \"words\": [\n    {\n      \"word\": \"你好\",\n      \"pinyin\": \"nǐ hǎo\",\n      \"english\": \"hello; hi\",\n      \"explanation\": \"A common and polite greeting in Chinese, used to sa"},"timestamp":1768667481614,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:130","message":"Before JSON parse","data":{"cleanedTextLength":245,"cleanedTextPreview":"{\n  \"translated\": \"你好\",\n  \"words\": [\n    {\n      \"word\": \"你好\",\n      \"pinyin\": \"nǐ hǎo\",\n      \"english\": \"hello; hi\",\n      \"explanation\": \"A common and polite greeting in Chinese, used to say 'hello"},"timestamp":1768667481618,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:135","message":"JSON parsed successfully","data":{"hasTranslated":true,"wordsCount":1,"hasPinyin":true},"timestamp":1768667481622,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:145","message":"Translation completed successfully","data":{"finalWordsCount":1},"timestamp":1768667481624,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"app/api/translate/route.ts:22","message":"Translation completed, returning result","data":{"hasResult":true,"hasTranslated":true,"wordsCount":1},"timestamp":1768667481626,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:4","message":"POST /api/translate entry","data":{},"timestamp":1768667518689,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:11","message":"Request body parsed","data":{"hasText":true,"textType":"string","textLength":13},"timestamp":1768667518692,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"app/api/translate/route.ts:18","message":"Before translateWithCodeswitching call","data":{},"timestamp":1768667518694,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
{"location":"lib/gemini.ts:80","message":"translateWithCodeswitching entry","data":{"textLength":13,"textPreview":"我和美女去Campus新闻","hasApiKey":true},"timestamp":1768667518695,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:84","message":"Model initialized","data":{"modelName":"gemini-2.5-flash"},"timestamp":1768667518696,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:114","message":"Before generateContent call","data":{"promptLength":912},"timestamp":1768667518697,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:119","message":"After generateContent call","data":{"hasResponse":true},"timestamp":1768667523886,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:124","message":"Response text extracted","data":{"textLength":1144,"textPreview":"```json\n{\n  \"translated\": \"我和美女去校园新闻\",\n  \"words\": [\n    {\n      \"word\": \"我\",\n      \"pinyin\": \"wǒ\",\n      \"english\": \"I; me\",\n      \"explanation\": \"First-person pronoun, referring to oneself.\"\n    },\n "},"timestamp":1768667523889,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:130","message":"Before JSON parse","data":{"cleanedTextLength":1132,"cleanedTextPreview":"{\n  \"translated\": \"我和美女去校园新闻\",\n  \"words\": [\n    {\n      \"word\": \"我\",\n      \"pinyin\": \"wǒ\",\n      \"english\": \"I; me\",\n      \"explanation\": \"First-person pronoun, referring to oneself.\"\n    },\n    {\n   "},"timestamp":1768667523892,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:135","message":"JSON parsed successfully","data":{"hasTranslated":true,"wordsCount":6,"hasPinyin":true},"timestamp":1768667523894,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"lib/gemini.ts:145","message":"Translation completed successfully","data":{"finalWordsCount":6},"timestamp":1768667523895,"sessionId":"debug-session","runId":"run5","hypothesisId":"J"}
{"location":"app/api/translate/route.ts:22","message":"Translation completed, returning result","data":{"hasResult":true,"hasTranslated":true,"wordsCount":6},"timestamp":1768667523899,"sessionId":"debug-session","runId":"run5","hypothesisId":"K"}
